/*! 
 Build based on gin-vue-admin 
 Time : 1715432289000 */
import{t as a,m as e,a as t,u as l,o as i,c as o,d as s,w as d,M as n,N as u,h as r,b as p,e as B,p as c,i as v,g as D}from"./087AC4D233B64EB0index.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import{E as C,a as m}from"./087AC4D233B64EB0select.js";import"./087AC4D233B64EB0scrollbar.js";/* empty css                      */import{E as b}from"./087AC4D233B64EB0date-picker.js";/* empty css                      */import{E as A,a as h}from"./087AC4D233B64EB0tab-pane.js";import{E as f,a as y}from"./087AC4D233B64EB0col.js";import L from"./087AC4D233B64EB0chartCard.js";import g from"./087AC4D233B64EB0trend.js";import _ from"./087AC4D233B64EB0chartLine.js";import{f as E}from"./087AC4D233B64EB0date.js";import{g as j}from"./087AC4D233B64EB0institution2.js";import{_ as I}from"./087AC4D233B64EB0_plugin-vue_export-helper.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0index20.js";import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0card.js";import"./087AC4D233B64EB0use-windows-resize.js";const w=(e,t)=>a({url:"/data/"+e,method:"get",params:t}),x=(e,t)=>a({url:"/data/"+e+"List",method:"get",params:t}),S={class:"page"},Y=(a=>(c("data-v-37e1e50e"),a=a(),v(),a))((()=>p("template",{slot:"footer"},[D("较年初 "),p("span",null,"￥ 234.56")],-1))),N={class:"gva-card-box"},k={class:"gva-card"},P={class:"date-picker"},V={key:0,class:"institution-selecter"},T=I({__name:"index",setup(a){const c=e(),v=t([]),D=t([{label:"存款",name:"deposit",detail:{dayCount:0,seriesCount:0,lable:[],color:[],data:[]}},{label:"贷款",name:"loan",detail:{dayCount:0,seriesCount:0,lable:[],color:[],data:[]}}]),I=t("存款"),T=t({}),M=t([E(new Date(Date.now()-6912e5),"yyyyMMdd"),E(new Date(Date.now()-864e5),"yyyyMMdd")]),z=a=>a.getTime()>=Date.now()-864e5,U=t([]),R=t({}),q=t([]),O=t(),F=t({}),G=t(!1),H=a=>{console.log(a),Q(Number(a[0]),Number(a[1]))},J=(a,e)=>{a&&a.forEach((a=>{if(a.children&&a.children.length)a.institutionId,a.institutionName,J(a.children,e);else if(U.value.push(a),c.userInfo.institutionId==a.institutionId){R.value=a;var t={};1==a.institutionLevel?(t={value:a.institutionId,label:"全行"},G.value=!0):(t={value:a.institutionId,label:a.institutionName},G.value=!1),e.unshift(t),O.value=a.institutionId,F.value=a}else if(5==a.institutionLevel){const t={value:a.institutionId,label:a.institutionName};e.push(t)}}))},K=async()=>{if(1==R.value.institutionLevel){if(0==(a=await w("depositBank",{})).code){const e=a.data.reDepositBank;v.value.push({title:"各项存款",total:e.DBAL,c2d:e.DBAL_C2D,c2by:e.DBAL_C2BY}),v.value.push({title:"储蓄存款",total:e.SDBAL,c2d:e.SDBAL_C2D,c2by:e.SDBAL_C2BY}),v.value.push({title:"活期存款",total:e.CDBAL,c2d:e.CDBAL_C2D,c2by:e.CDBAL_C2BY})}if(0==(a=await w("loanBank",{})).code){const e=a.data.reLoanBank;v.value.push({title:"各项贷款",total:e.LBAL,c2d:e.LBAL_C2D,c2by:e.LBAL_C2BY})}console.log(v.value)}else{var a;if(0==(a=await w("depositSub",{branch:c.userInfo.institutionId})).code){const e=a.data.reDepositSub;v.value.push({title:"各项存款",total:e.DBAL,c2d:e.DBAL_C2D,c2by:e.DBAL_C2BY,c2byp:e.DBAL_INCP_C2BY})}if(0==(a=await w("depositDetailSave",{branch:c.userInfo.institutionId})).code){const e=a.data.reDepositDetailSave;v.value.push({title:"储蓄存款",total:e.DBAL,c2d:e.DBAL_C2D,c2by:e.DBAL_C2BY,c2byp:e.DBAL_INCP_C2BY})}if(0==(a=await w("depositDetailCorp",{branch:c.userInfo.institutionId})).code){const e=a.data.reDepositDetailCorp;v.value.push({title:"对公存款",total:e.DBAL,c2d:e.DBAL_C2D,c2by:e.DBAL_C2BY,c2byp:e.DBAL_INCP_C2BY})}if(0==(a=await w("loanSub",{branch:c.userInfo.institutionId})).code){const e=a.data.reLoanSub;v.value.push({title:"各项贷款",total:e.LBAL,c2d:e.LBAL_C2D,c2by:e.LBAL_C2BY,c2byp:e.LBAL_INCP_C2BY})}}},Q=async(a,e)=>{const t=["#188df0","#52c41a","#f5222d"];var l=[];if(console.log(F.value,O),console.log(l),1==F.value.institutionLevel){if(0==(u=await x("depositBank",{startDate:a,endDate:e,page:1,pageSize:999})).code&&u.data.total>0){(s={label:"存款",name:"deposit",detail:{dayCount:0,seriesCount:0,lable:[],color:[],data:[]}}).detail.dayCount=u.data.total,s.detail.seriesCount=2,s.detail.lable=["储蓄存款","对公存款"],s.detail.color=t;var i=[[],[]];for(var o in u.data.list)i[0].push({date:u.data.list[o].DT,val:u.data.list[o].SDBAL}),i[1].push({date:u.data.list[o].DT,val:u.data.list[o].CDBAL});s.detail.data.push(i[0]),s.detail.data.push(i[1]),l.push(s)}if(0==(u=await x("loanBank",{startDate:a,endDate:e,page:1,pageSize:999})).code&&u.data.total>0){(s={label:"贷款",name:"loan",detail:{dayCount:0,seriesCount:0,lable:[],color:[],data:[]}}).detail.dayCount=u.data.total,s.detail.seriesCount=2,s.detail.lable=["对公贷款","个人贷款"],s.detail.color=t;i=[[],[]];for(var o in u.data.list)i[0].push({date:u.data.list[o].DT,val:u.data.list[o].LBAL_CORP}),i[1].push({date:u.data.list[o].DT,val:u.data.list[o].LBAL_PERS});s.detail.data.push(i[0]),s.detail.data.push(i[1]),l.push(s)}}else{const r=[{type:"depositDetailCorp",lable:"对公存款"},{type:"depositDetailSave",lable:"储蓄存款"},{type:"depositDetailCur",lable:"活期存款"}],p=[{type:"loanDetailCorp",lable:"对公贷款"},{type:"loanDetailPers",lable:"个人贷款"}];var s={label:"存款",name:"deposit",detail:{dayCount:0,seriesCount:0,lable:[],color:[],data:[]}};for(var d in r){if(0==(u=await x(r[d].type,{startDate:a,endDate:e,branch:O.value,page:1,pageSize:999})).code&&u.data.total>0){s.detail.dayCount=u.data.total,s.detail.seriesCount+=1,s.detail.lable.push(r[d].lable),s.detail.color.push(t[d]);i=[];for(var o in u.data.list)i.push({date:u.data.list[o].DT,val:u.data.list[o].DBAL});s.detail.data.push(i)}}for(var n in l.push(s),s={label:"贷款",name:"loan",detail:{dayCount:0,seriesCount:0,lable:[],color:[],data:[]}},p){var u;if(0==(u=await x(p[n].type,{startDate:a,endDate:e,branch:O.value,page:1,pageSize:999})).code&&u.data.total>0){s.detail.dayCount=u.data.total,s.detail.seriesCount+=1,s.detail.lable.push(p[n].lable),s.detail.color.push(t[n]);i=[];for(var o in u.data.list)i.push({date:u.data.list[o].DT,val:u.data.list[o].LBAL});s.detail.data.push(i)}}l.push(s)}D.value=l,I.value=D.value[0].name,T.value=D.value[0].detail,console.log(D.value)},W=a=>{I.value=D.value[a.index].name,T.value=D.value[a.index].detail,console.log(T.value)},X=async a=>{for(var e in console.log(a),U.value)a==U.value[e].institutionId&&(F.value=U.value[e]);Q(Number(M.value[0]),Number(M.value[1]))};return(async()=>{var a=await j({page:1,pageSize:999});J(a.data.list,q.value),K(),Q(Number(M.value[0]),Number(M.value[1]))})(),l(),(a,e)=>{const t=f,l=y,c=A,E=h,j=b,w=C,x=m;return i(),o("div",S,[s(l,{gutter:12},{default:d((()=>[(i(!0),o(n,null,u(v.value,(a=>(i(),r(t,{sm:24,md:6,xl:6,style:{margin:"12px 0px"}},{default:d((()=>[s(L,{title:a.title,total:a.total},{default:d((()=>[p("div",null,[s(g,{isPer:!1,style:{"margin-right":"16px"},term:"较昨日",value:a.c2d},null,8,["value"]),s(g,{isPer:!1,style:{"margin-right":"16px"},term:"较年初",value:a.c2by},null,8,["value"])]),Y])),_:2},1032,["title","total"])])),_:2},1024)))),256))])),_:1}),s(l,{gutter:24},{default:d((()=>[s(t,{xs:24,sm:24,xl:24},{default:d((()=>[p("div",N,[p("div",k,[s(E,{onTabClick:W,modelValue:I.value,"onUpdate:modelValue":e[0]||(e[0]=a=>I.value=a),type:"card"},{default:d((()=>[(i(!0),o(n,null,u(D.value,(a=>(i(),o("span",null,[s(c,{label:a.label,name:a.name},null,8,["label","name"])])))),256)),s(_,{detail:T.value},null,8,["detail"])])),_:1},8,["modelValue"]),p("div",P,[s(j,{modelValue:M.value,"onUpdate:modelValue":e[1]||(e[1]=a=>M.value=a),type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","append-to-body":!1,editable:!1,"disabled-date":z,onChange:H,"value-format":"YYYYMMDD"},null,8,["modelValue"])]),G.value?(i(),o("div",V,[s(x,{onChange:X,modelValue:O.value,"onUpdate:modelValue":e[2]||(e[2]=a=>O.value=a),filterable:"",placeholder:"请选择"},{default:d((()=>[(i(!0),o(n,null,u(q.value,(a=>(i(),r(w,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):B("",!0)])])])),_:1})])),_:1})])}}},[["__scopeId","data-v-37e1e50e"]]);export{T as default};
