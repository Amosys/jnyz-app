/*! 
 Build based on gin-vue-admin 
 Time : 1715432289000 */
import{m as e,o as l,h as a,w as t,d as o,g as r,k as u,E as d,t as s,a as n,r as i,O as p,c as m,b as c,q as v,J as f,F as b,P as g,I as C,l as y}from"./087AC4D233B64EB0index.js";import{E as h,a as B}from"./087AC4D233B64EB0descriptions-item.js";import{E as _}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as A}from"./087AC4D233B64EB0scrollbar.js";import{E as D}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";/* empty css                      */import{E,a as w}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as V}from"./087AC4D233B64EB0popover.js";import{a as I,E as j}from"./087AC4D233B64EB0form-item.js";/* empty css                      */import{E as k}from"./087AC4D233B64EB0date-picker.js";import{g as x,d as S,f as T,a as U,c as N,u as z}from"./087AC4D233B64EB0appCloudSpeaker2.js";import{f as q}from"./087AC4D233B64EB0format.js";import{E as F}from"./087AC4D233B64EB0upload2.js";import"./087AC4D233B64EB0progress.js";import{E as O}from"./087AC4D233B64EB0index20.js";import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";import"./087AC4D233B64EB0cloneDeep.js";const R={__name:"importExcel",props:{templateId:{type:String,required:!0}},emits:["on-success"],setup(s,{emit:n}){const i=s,p=n,m="".concat("/api","/sysExportTemplate/importExcel?templateID=").concat(i.templateId),c=e(),v={"x-token":c.token,"x-user-id":c.userInfo.ID},f=e=>{0===e.code?(u.success("导入成功"),p("on-success")):u.error(e.msg)};return(e,u)=>{const s=d,n=F;return l(),a(n,{action:m,"show-file-list":!1,"on-success":f,multiple:!1,headers:v},{default:t((()=>[o(s,{type:"primary",icon:"upload"},{default:t((()=>[r("导入")])),_:1})])),_:1})}}},L={__name:"exportExcel",props:{templateId:{type:String,required:!0}},setup(e){const o=e,n=async()=>{if(""===o.templateId)return void u.error("组件未设置模板ID");const e="".concat("","/sysExportTemplate/exportExcel?templateID=").concat(o.templateId);s({url:e,method:"get",responseType:"blob"}).then((e=>{const l=document.createElement("a");let a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var t="".concat(o.templateId,".xlsx");l.style.display="none",l.href=URL.createObjectURL(a),l.setAttribute("download",t),document.body.appendChild(l),l.click(),document.body.removeChild(l)}))};return(e,o)=>{const u=d;return l(),a(u,{type:"primary",icon:"download",onClick:n},{default:t((()=>[r("导出")])),_:1})}}},J={class:"gva-search-box"},K={class:"gva-table-box"},P={class:"gva-btn-list"},Q=c("p",null,"确定要删除吗？",-1),G={style:{"text-align":"right","margin-top":"8px"}},H={class:"gva-pagination"},M={class:"dialog-footer"},W=Object.assign({name:"AppCloudSpeaker"},{__name:"appCloudSpeaker",setup(e){const a=n({sn:"",hwSn:"",factory:"",sType:"",mode:"",customerId:"",customerName:"",storeId:"",storeName:"",region:"",institution:""}),s=i({sn:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),F=i({createdAt:[{validator:(e,l,a)=>{le.value.startCreatedAt&&!le.value.endCreatedAt?a(new Error("请填写结束日期")):!le.value.startCreatedAt&&le.value.endCreatedAt?a(new Error("请填写开始日期")):le.value.startCreatedAt&&le.value.endCreatedAt&&(le.value.startCreatedAt.getTime()===le.value.endCreatedAt.getTime()||le.value.startCreatedAt.getTime()>le.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),W=n(),X=n(),Y=n(1),Z=n(0),$=n(10),ee=n([]),le=n({}),ae=()=>{le.value={},ue()},te=()=>{var e;null==(e=X.value)||e.validate((async e=>{e&&(Y.value=1,$.value=10,ue())}))},oe=e=>{$.value=e,ue()},re=e=>{Y.value=e,ue()},ue=async()=>{const e=await x({page:Y.value,pageSize:$.value,...le.value});0===e.code&&(ee.value=e.data.list,Z.value=e.data.total,Y.value=e.data.page,$.value=e.data.pageSize)};ue();(async()=>{})();const de=n([]),se=e=>{de.value=e},ne=n(!1),ie=async()=>{const e=[];if(0===de.value.length)return void u({type:"warning",message:"请选择要删除的数据"});de.value&&de.value.map((l=>{e.push(l.ID)}));0===(await S({ids:e})).code&&(u({type:"success",message:"删除成功"}),ee.value.length===e.length&&Y.value>1&&Y.value--,ne.value=!1,ue())},pe=n(""),me=async e=>{0===(await U({ID:e.ID})).code&&(u({type:"success",message:"删除成功"}),1===ee.value.length&&Y.value>1&&Y.value--,ue())},ce=n(!1),ve=n(!1),fe=async e=>{const l=await T({ID:e.ID});0===l.code&&(a.value=l.data.reCloudSpeaker,ve.value=!0)},be=()=>{ve.value=!1,a.value={sn:"",hwSn:"",factory:"",sType:"",mode:"",customerId:"",customerName:"",storeId:"",storeName:"",region:"",institution:""}},ge=()=>{pe.value="create",ce.value=!0},Ce=()=>{ce.value=!1,a.value={sn:"",hwSn:"",factory:"",sType:"",mode:"",customerId:"",customerName:"",storeId:"",storeName:"",region:"",institution:""}},ye=async()=>{var e;null==(e=W.value)||e.validate((async e=>{if(!e)return;let l;switch(pe.value){case"create":default:l=await N(a.value);break;case"update":l=await z(a.value)}0===l.code&&(u({type:"success",message:"创建/更改成功"}),Ce(),ue())}))};return(e,u)=>{const n=p("QuestionFilled"),i=C,x=O,S=k,U=I,N=y,z=d,ue=j,he=V,Be=E,_e=p("InfoFilled"),Ae=w,De=D,Ee=A,we=_,Ve=h,Ie=B;return l(),m("div",null,[c("div",J,[o(ue,{ref_key:"elSearchFormRef",ref:X,inline:!0,model:le.value,class:"demo-form-inline",rules:F,onKeyup:v(te,["enter"])},{default:t((()=>[o(U,{label:"创建日期",prop:"createdAt"},{label:t((()=>[c("span",null,[r(" 创建日期 "),o(x,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:t((()=>[o(i,null,{default:t((()=>[o(n)])),_:1})])),_:1})])])),default:t((()=>[o(S,{modelValue:le.value.startCreatedAt,"onUpdate:modelValue":u[0]||(u[0]=e=>le.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!le.value.endCreatedAt&&e.getTime()>le.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),r(" — "),o(S,{modelValue:le.value.endCreatedAt,"onUpdate:modelValue":u[1]||(u[1]=e=>le.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!le.value.startCreatedAt&&e.getTime()<le.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),o(U,{label:"序列号",prop:"sn"},{default:t((()=>[o(N,{modelValue:le.value.sn,"onUpdate:modelValue":u[2]||(u[2]=e=>le.value.sn=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(U,{label:"硬件序列号",prop:"hwSn"},{default:t((()=>[o(N,{modelValue:le.value.hwSn,"onUpdate:modelValue":u[3]||(u[3]=e=>le.value.hwSn=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(U,null,{default:t((()=>[o(z,{type:"primary",icon:"search",onClick:te},{default:t((()=>[r("查询")])),_:1}),o(z,{icon:"refresh",onClick:ae},{default:t((()=>[r("重置")])),_:1})])),_:1}),o(U,null,{default:t((()=>[o(R,{templateId:"cloudSpeaker"})])),_:1}),o(U,null,{default:t((()=>[o(L,{templateId:"cloudSpeaker"})])),_:1})])),_:1},8,["model","rules"])]),c("div",K,[c("div",P,[o(z,{type:"primary",icon:"plus",onClick:ge},{default:t((()=>[r("新增")])),_:1}),o(he,{visible:ne.value,"onUpdate:visible":u[6]||(u[6]=e=>ne.value=e),disabled:!de.value.length,placement:"top",width:"160"},{reference:t((()=>[o(z,{icon:"delete",style:{"margin-left":"10px"},disabled:!de.value.length,onClick:u[5]||(u[5]=e=>ne.value=!0)},{default:t((()=>[r("删除")])),_:1},8,["disabled"])])),default:t((()=>[Q,c("div",G,[o(z,{type:"primary",link:"",onClick:u[4]||(u[4]=e=>ne.value=!1)},{default:t((()=>[r("取消")])),_:1}),o(z,{type:"primary",onClick:ie},{default:t((()=>[r("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),o(Ae,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ee.value,"row-key":"ID",onSelectionChange:se},{default:t((()=>[o(Be,{type:"selection",width:"55"}),o(Be,{align:"left",label:"日期",width:"180"},{default:t((e=>[r(f(b(q)(e.row.CreatedAt)),1)])),_:1}),o(Be,{align:"left",label:"序列号",prop:"sn",width:"120"}),o(Be,{align:"left",label:"硬件序列号",prop:"hwSn",width:"120"}),o(Be,{align:"left",label:"厂商",prop:"factory",width:"120"}),o(Be,{align:"left",label:"音响类型",prop:"sType",width:"120"}),o(Be,{align:"left",label:"音响模式",prop:"mode",width:"120"}),o(Be,{align:"left",label:"商户ID",prop:"customerId",width:"120"}),o(Be,{align:"left",label:"商户名称",prop:"customerName",width:"120"}),o(Be,{align:"left",label:"门店ID",prop:"storeId",width:"120"}),o(Be,{align:"left",label:"门店名称",prop:"storeName",width:"120"}),o(Be,{align:"left",label:"地区",prop:"region",width:"120"}),o(Be,{align:"left",label:"所属机构",prop:"institution",width:"120"}),o(Be,{align:"left",label:"操作","min-width":"120"},{default:t((e=>[o(z,{type:"primary",link:"",class:"table-button",onClick:l=>fe(e.row)},{default:t((()=>[o(i,{style:{"margin-right":"5px"}},{default:t((()=>[o(_e)])),_:1}),r(" 查看详情 ")])),_:2},1032,["onClick"]),o(z,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await T({ID:e.ID});pe.value="update",0===l.code&&(a.value=l.data.reCloudSpeaker,ce.value=!0)})(e.row)},{default:t((()=>[r("变更")])),_:2},1032,["onClick"]),o(z,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void g.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{me(a)}));var a}},{default:t((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),c("div",H,[o(De,{layout:"total, sizes, prev, pager, next, jumper","current-page":Y.value,"page-size":$.value,"page-sizes":[10,30,50,100],total:Z.value,onCurrentChange:re,onSizeChange:oe},null,8,["current-page","page-size","total"])])]),o(we,{modelValue:ce.value,"onUpdate:modelValue":u[18]||(u[18]=e=>ce.value=e),"before-close":Ce,title:"create"===pe.value?"添加":"修改","destroy-on-close":""},{footer:t((()=>[c("div",M,[o(z,{onClick:Ce},{default:t((()=>[r("取 消")])),_:1}),o(z,{type:"primary",onClick:ye},{default:t((()=>[r("确 定")])),_:1})])])),default:t((()=>[o(Ee,{height:"500px"},{default:t((()=>[o(ue,{model:a.value,"label-position":"right",ref_key:"elFormRef",ref:W,rules:s,"label-width":"80px"},{default:t((()=>[o(U,{label:"序列号:",prop:"sn"},{default:t((()=>[o(N,{modelValue:a.value.sn,"onUpdate:modelValue":u[7]||(u[7]=e=>a.value.sn=e),clearable:!1,placeholder:"请输入序列号"},null,8,["modelValue"])])),_:1}),o(U,{label:"硬件序列号:",prop:"hwSn"},{default:t((()=>[o(N,{modelValue:a.value.hwSn,"onUpdate:modelValue":u[8]||(u[8]=e=>a.value.hwSn=e),clearable:!1,placeholder:"请输入硬件序列号"},null,8,["modelValue"])])),_:1}),o(U,{label:"厂商:",prop:"factory"},{default:t((()=>[o(N,{modelValue:a.value.factory,"onUpdate:modelValue":u[9]||(u[9]=e=>a.value.factory=e),clearable:!0,placeholder:"请输入厂商"},null,8,["modelValue"])])),_:1}),o(U,{label:"音响类型:",prop:"sType"},{default:t((()=>[o(N,{modelValue:a.value.sType,"onUpdate:modelValue":u[10]||(u[10]=e=>a.value.sType=e),clearable:!0,placeholder:"请输入音响类型"},null,8,["modelValue"])])),_:1}),o(U,{label:"音响模式:",prop:"mode"},{default:t((()=>[o(N,{modelValue:a.value.mode,"onUpdate:modelValue":u[11]||(u[11]=e=>a.value.mode=e),clearable:!0,placeholder:"请输入音响模式"},null,8,["modelValue"])])),_:1}),o(U,{label:"商户ID:",prop:"customerId"},{default:t((()=>[o(N,{modelValue:a.value.customerId,"onUpdate:modelValue":u[12]||(u[12]=e=>a.value.customerId=e),clearable:!0,placeholder:"请输入商户ID"},null,8,["modelValue"])])),_:1}),o(U,{label:"商户名称:",prop:"customerName"},{default:t((()=>[o(N,{modelValue:a.value.customerName,"onUpdate:modelValue":u[13]||(u[13]=e=>a.value.customerName=e),clearable:!0,placeholder:"请输入商户名称"},null,8,["modelValue"])])),_:1}),o(U,{label:"门店ID:",prop:"storeId"},{default:t((()=>[o(N,{modelValue:a.value.storeId,"onUpdate:modelValue":u[14]||(u[14]=e=>a.value.storeId=e),clearable:!0,placeholder:"请输入门店ID"},null,8,["modelValue"])])),_:1}),o(U,{label:"门店名称:",prop:"storeName"},{default:t((()=>[o(N,{modelValue:a.value.storeName,"onUpdate:modelValue":u[15]||(u[15]=e=>a.value.storeName=e),clearable:!0,placeholder:"请输入门店名称"},null,8,["modelValue"])])),_:1}),o(U,{label:"地区:",prop:"region"},{default:t((()=>[o(N,{modelValue:a.value.region,"onUpdate:modelValue":u[16]||(u[16]=e=>a.value.region=e),clearable:!0,placeholder:"请输入地区"},null,8,["modelValue"])])),_:1}),o(U,{label:"所属机构:",prop:"institution"},{default:t((()=>[o(N,{modelValue:a.value.institution,"onUpdate:modelValue":u[17]||(u[17]=e=>a.value.institution=e),clearable:!0,placeholder:"请输入所属机构"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),o(we,{modelValue:ve.value,"onUpdate:modelValue":u[19]||(u[19]=e=>ve.value=e),style:{width:"800px"},"lock-scroll":"","before-close":be,title:"查看详情","destroy-on-close":""},{default:t((()=>[o(Ee,{height:"550px"},{default:t((()=>[o(Ie,{column:"1",border:""},{default:t((()=>[o(Ve,{label:"序列号"},{default:t((()=>[r(f(a.value.sn),1)])),_:1}),o(Ve,{label:"硬件序列号"},{default:t((()=>[r(f(a.value.hwSn),1)])),_:1}),o(Ve,{label:"厂商"},{default:t((()=>[r(f(a.value.factory),1)])),_:1}),o(Ve,{label:"音响类型"},{default:t((()=>[r(f(a.value.sType),1)])),_:1}),o(Ve,{label:"音响模式"},{default:t((()=>[r(f(a.value.mode),1)])),_:1}),o(Ve,{label:"商户ID"},{default:t((()=>[r(f(a.value.customerId),1)])),_:1}),o(Ve,{label:"商户名称"},{default:t((()=>[r(f(a.value.customerName),1)])),_:1}),o(Ve,{label:"门店ID"},{default:t((()=>[r(f(a.value.storeId),1)])),_:1}),o(Ve,{label:"门店名称"},{default:t((()=>[r(f(a.value.storeName),1)])),_:1}),o(Ve,{label:"地区"},{default:t((()=>[r(f(a.value.region),1)])),_:1}),o(Ve,{label:"所属机构"},{default:t((()=>[r(f(a.value.institution),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{W as default};
